<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>QuizProPL ‚Äî Sprawd≈∫ wiedzƒô o Polsce</title>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#051028">
<style>
:root{
  --bg1:#071025;
  --card:#0b1220;
  --text:#e6f7ff;
  --muted:#9fb6d6;
  --neon1:#00f0ff;
  --neon2:#ff3fc4;
  --good:#16d36a;
  --bad:#ff5c6c;
  --accent:#ffd27a;
  --radius:14px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Roboto,Arial}
body{
  background:linear-gradient(180deg,var(--bg1),#051028 80%);
  color:var(--text);
  display:flex;align-items:center;justify-content:center;padding:20px;
}
.page{width:100%;max-width:920px}
.ad-top,.ad-bottom{
  background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px dashed rgba(255,255,255,0.04);
  color:var(--muted); border-radius:12px; padding:10px; text-align:center; margin-bottom:12px;
  font-size:0.95rem;
}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:var(--radius);
  padding:22px;
  box-shadow:0 10px 40px rgba(0,0,0,0.6);
  border:1px solid rgba(0,255,255,0.04);
}
.top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
.title{font-weight:800;color:var(--neon1);letter-spacing:0.6px}
.score{display:none;color:var(--accent)}
.question{font-size:1.4rem;text-align:center;margin:8px 0 14px;color:var(--text)}
.answers{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:700px){ .answers{grid-template-columns:1fr} .question{font-size:1.08rem} }

.btn{
  display:flex;align-items:center;justify-content:center;padding:12px;border-radius:12px;cursor:pointer;
  user-select:none;font-weight:800;color:white;font-size:0.98rem;min-height:52px;
  transition:transform .12s ease, box-shadow .12s ease, opacity .12s;
  background:linear-gradient(90deg,var(--neon1),var(--neon2));
  box-shadow:0 10px 40px rgba(0,240,255,0.04), 0 0 20px rgba(255,63,196,0.02);
  border:1px solid rgba(255,255,255,0.02);
}
.btn:active{transform:translateY(2px)}
.btn:hover{transform:translateY(-4px); box-shadow:0 18px 60px rgba(0,240,255,0.06);}
.btn.good{ background: linear-gradient(90deg,var(--good),#8df3b0); box-shadow:0 10px 40px rgba(22,211,106,0.06);}
.btn.bad{ background: linear-gradient(90deg,var(--bad),#ff8a94); box-shadow:0 10px 40px rgba(255,92,108,0.06);}

.meta{display:flex;justify-content:space-between;align-items:center;margin-top:12px;color:var(--muted);font-size:0.95rem}
.small-muted{color:var(--muted);font-size:0.95rem;margin-top:8px}

/* final overlay */
#final{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(3,6,10,0.85),rgba(2,3,8,0.9));z-index:1200}
#final-card{
  background:linear-gradient(180deg,#081322,#06121f);
  padding:30px;
  border-radius:14px;
  box-shadow:0 20px 60px rgba(0,0,0,0.7);
  text-align:center;color:var(--text);
  max-width:580px;width:94%;
}
#final-text {
  font-size:2.2rem;
  font-weight:800;
  color: var(--accent);
  margin: 16px 0;
}

.final-actions{display:flex;flex-direction:column;gap:10px;align-items:stretch;margin-top:10px}
.final-actions .btn{font-size:1rem;padding:12px 14px}

/* install hint (PWA) */
.install-hint { display:none; margin-top:8px; font-size:0.95rem; color:var(--muted); text-align:center; }

/* messages */
.msg{
  position:fixed; right:16px; bottom:16px; z-index:1300;
  background:rgba(0,0,0,0.7); padding:10px 14px; border-radius:10px; color:#fff; font-size:0.95rem;
  box-shadow:0 8px 30px rgba(0,0,0,0.6);
  display:none;
}

/* nick input */
#nickWrap{display:flex;gap:8px;align-items:center}
#nick{padding:16px 18px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:var(--text);min-width:260px;font-weight:700;font-size:1.1rem}

/* canvas */
canvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1100}

/* video ad container */
#videoAd{
  display:none;
  width:100%;height:180px;background:#000;color:white;display:flex;align-items:center;justify-content:center;margin:12px 0;border-radius:12px;
}
</style>
</head>
<body>
<canvas id="fx"></canvas>

<div class="page">
  <div class="ad-top" id="adTop">Miejsce na reklamƒô ‚Äî g√≥rny baner</div>

  <div class="card" id="quizCard">
    <div class="top">
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div class="title">QuizProPL ‚Äî Sprawd≈∫ wiedzƒô o Polsce</div>
        <div id="nickWrap">
          <input id="nick" placeholder="Jarkos" aria-label="Nick gracza" />
        </div>
      </div>
      <div class="score">Punkty: <span id="points">0</span></div>
    </div>

    <div id="question" class="question">≈Åadowanie...</div>
    <div id="answers" class="answers"></div>
    <div id="videoAd">Reklama wideo</div>

    <div class="meta">
      <div id="progress">Pytanie 0/0</div>
      <div class="small-muted">Miejsca reklamowe gotowe</div>
    </div>
  </div>

  <div style="height:12px"></div>
  <div class="ad-bottom" id="adBottom">Miejsce na reklamƒô ‚Äî dolny baner</div>
</div>

<div id="final" aria-hidden="true">
  <div id="final-card">
    <h1 style="margin:6px 0 8px; color:var(--neon2)">Tw√≥j wynik</h1>
    <div id="final-text">0 pkt</div>

    <div class="final-actions" style="margin-top:14px;">
      <div class="btn big" id="retryBtn" style="background:linear-gradient(90deg,#16d36a,#8df3b0)">Zagraj ponownie/Popraw wynik</div>
      <div class="btn big" id="shareBtn" style="background:linear-gradient(90deg,#00f0ff,#ff3fc4)">Poleƒá quiz znajomemu</div>
      <div class="btn big" id="saveBtn" style="background:linear-gradient(90deg,#ffd27a,#ff9f43); color:#081322;">üì≤ Zapisz na ekranie g≈Ç√≥wnym</div>
      <div class="btn big" id="endBtn" style="background:linear-gradient(90deg,#ff5c6c,#ff8a94)">Koniec</div>
      <div class="install-hint" id="installHint">Aby zainstalowaƒá: kliknij ‚ÄûZapisz na ekranie g≈Ç√≥wnym‚Äù</div>
    </div>

    <div class="small-muted" style="margin-top:8px">Dziƒôkujemy za grƒô ‚Äî wr√≥ƒá jutro i pobij sw√≥j wynik!</div>
  </div>
</div>

<div class="msg" id="msgBox"></div>

<audio id="bg" loop src="sounds/background.mp3"></audio>
<audio id="snd-ding" src="sounds/ding.mp3"></audio>
<audio id="snd-buzzer" src="sounds/buzzer.mp3"></audio>
<audio id="snd-fanfare" src="sounds/fanfare.mp3"></audio>

<script>
(() => {
  const $ = id => document.getElementById(id);
  const questionEl = $('question'), answersEl = $('answers'), pointsEl = $('points'),
        progressEl = $('progress'), finalEl = $('final'), finalText = $('final-text'),
        videoAd = $('videoAd'), adTop = $('adTop'), adBottom = $('adBottom');
  const nickEl = $('nick');
  const bg = $('bg');

  let points=0, current=0, deferredPrompt=null;

  document.body.addEventListener('click', () => { if(bg.paused) bg.play().catch(()=>{}); }, { once: true });

  if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js').catch(()=>{}); }

  const saveBtn = $('saveBtn');
  const installHint = $('installHint');
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    saveBtn.style.display = 'block';
    installHint.style.display = 'block';
  });

  function isiOS() { return /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()); }
  if (isiOS()) installHint.style.display = 'block';

   const QUESTIONS = [
  { q: "Stolica Polski?", a: ["Warszawa","Krak√≥w","Gda≈Ñsk","Wroc≈Çaw"], correct: 0 },
  { q: "Najwiƒôkszy polski port morski:", a: ["Gda≈Ñsk","Gdynia","Szczecin","≈öwinouj≈õcie"], correct: 0 },
  { q: "Najwiƒôksze polskie miasto na po≈Çudniu:", a: ["Krak√≥w","Wroc≈Çaw","Katowice","≈Å√≥d≈∫"], correct: 0 },
  { q: "Polska jest cz≈Çonkiem NATO od:", a: ["1999","2004","1990","2001"], correct: 0 },
  { q: "Polski skoczek narciarski z wieloma medalami olimpijskimi:", a: ["Adam Ma≈Çysz","Kamil Stoch","Piotr ≈ªy≈Ça","Andrzej Stƒôka≈Ça"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. mazowieckiego:", a: ["Warszawa","Radom","P≈Çock","Siedlce"], correct: 0 },
  { q: "Najwa≈ºniejszy polski noblista w dziedzinie chemii:", a: ["Maria Sk≈Çodowska-Curie","Jan Czochralski","Micha≈Ç Kalecki","Stefan Banach"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w Polsce?", a: ["Wis≈Ça","Odra","Warta","Bug"], correct: 0 },
  { q: "Najwy≈ºszy szczyt w Polsce?", a: ["Rysy","≈önie≈ºka","Giewont","Babia G√≥ra"], correct: 0 },
  { q: "W kt√≥rym roku Polska odzyska≈Ça niepodleg≈Ço≈õƒá?", a: ["1918","1945","1914","1939"], correct: 0 },
  { q: "Polski orze≈Ç jest symbolem?", a: ["God≈Ça","Flagi","Hymnu","Herbu miasta"], correct: 0 },
  { q: "Najwiƒôksze miasto na ≈ölƒÖsku?", a: ["Katowice","Gliwice","Czƒôstochowa","Bytom"], correct: 0 },
  { q: "Polski hymn zaczyna siƒô od s≈Ç√≥w?", a: ["Jeszcze Polska nie zginƒô≈Ça","Mazurka DƒÖbrowskiego","Bogurodzicy","Roty"], correct: 0 },
  { q: "Polski kr√≥l zwany ‚ÄûLwem Lechistanu‚Äù?", a: ["Kazimierz Wielki","Boles≈Çaw Chrobry","Zygmunt Stary","W≈Çadys≈Çaw Jagie≈Ç≈Ço"], correct: 0 },
  { q: "Najd≈Çu≈ºsza ulica w Warszawie?", a: ["Marsza≈Çkowska","Nowy ≈öwiat","Krakowskie Przedmie≈õcie","Aleje Jerozolimskie"], correct: 0 },
  { q: "Symbol Polski na mapie ≈õwiata?", a: ["Orze≈Ç bia≈Çy","Smok Wawelski","Syrenka","Mieszko I"], correct: 0 },
  { q: "Najwiƒôksze jezioro w Polsce?", a: ["≈öniardwy","Mamry","Ha≈Ñcza","DƒÖbie"], correct: 0 },
  { q: "Polski kompozytor, autor polonez√≥w:", a: ["Fryderyk Chopin","Stanis≈Çaw Moniuszko","Karol Szymanowski","Henryk Wieniawski"], correct: 0 },
  { q: "Najwy≈ºsza g√≥ra w Tatrach Zachodnich?", a: ["B≈Çyszcz","≈Åopata","Rysy","≈öwinica"], correct: 0 },
  { q: "Polski pi≈Çkarz znany z kadry narodowej:", a: ["Robert Lewandowski","Grzegorz Krychowiak","Kamil Glik","≈Åukasz Piszczek"], correct: 0 },
  { q: "Polska graniczy z ile pa≈Ñstwami?", a: ["7","6","5","8"], correct: 0 },
  { q: "G≈Ç√≥wny hymn Polski to:", a: ["Mazurek DƒÖbrowskiego","Bogurodzica","Roty","Gaude Mater Polonia"], correct: 0 },
  { q: "Polska waluta?", a: ["Z≈Çoty","Euro","Dolar","Funt"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ma≈Çopolskiego:", a: ["Krak√≥w","Tarn√≥w","Nowy SƒÖcz","O≈õwiƒôcim"], correct: 0 },
  { q: "Polski astronom, odkrywca planetoid:", a: ["Kopernik","Tadeusz Banachiewicz","Jan Heweliusz","Kazimierz Kordylewski"], correct: 0 },
  { q: "Najwa≈ºniejsza bitwa pod WarszawƒÖ w 1920 r.?", a: ["Cud nad Wis≈ÇƒÖ","Bitwa Warszawska","Bitwa pod Lenino","Bitwa pod Grunwaldem"], correct: 0 },
  { q: "Polska najwiƒôkszym producentem jab≈Çek w Europie?", a: ["Tak","Nie","Czƒô≈õciowo","Nie wiadomo"], correct: 0 },
  { q: "Polski w≈Çadca koronowany w 1025 r.:", a: ["Boles≈Çaw Chrobry","Mieszko I","Kazimierz Wielki","W≈Çadys≈Çaw Jagie≈Ç≈Ço"], correct: 0 },
  { q: "Najd≈Çu≈ºszy tunel w Polsce:", a: ["Tunel pod ≈öwinƒÖ","Tunel kolejowy w ≈öwierku","Tunel pod MartwƒÖ Wis≈ÇƒÖ","Tunel w Miƒôdzyrzeczu"], correct: 0 },
  { q: "Polska czƒô≈õƒá Puszczy Bia≈Çowieskiej:", a: ["Bia≈Çowie≈ºa","Knyszy≈Ñska","Kampinoska","Augustowska"], correct: 0 },
  { q: "Znany polski lekkoatleta:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najstarsze miasto w Polsce:", a: ["Kalisz","Krak√≥w","Gniezno","Pozna≈Ñ"], correct: 0 },
  { q: "Polska granica morska wynosi:", a: ["440 km","300 km","600 km","520 km"], correct: 0 },
  { q: "Znany polski w√≥dz wojskowy:", a: ["Tadeusz Ko≈õciuszko","Jan III Sobieski","J√≥zef Pi≈Çsudski","Kazimierz Pu≈Çaski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. pomorskiego:", a: ["Gda≈Ñsk","Gdynia","S≈Çupsk","ElblƒÖg"], correct: 0 },
  { q: "Polski noblista literacki:", a: ["Henryk Sienkiewicz","Maria Sk≈Çodowska-Curie","Czes≈Çaw Mi≈Çosz","Wis≈Çawa Szymborska"], correct: 0 },
  { q: "Najwiƒôksze jezioro mazurskie:", a: ["≈öniardwy","Mamry","Niegocin","Jagodne"], correct: 0 },
  { q: "Znany polski re≈ºyser filmowy:", a: ["Krzysztof Kie≈õlowski","Andrzej Wajda","Roman Pola≈Ñski","Jerzy Hoffman"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. wielkopolskiego:", a: ["Pozna≈Ñ","Kalisz","Gniezno","Leszno"], correct: 0 },
  { q: "Polski astronom s≈Çynny z obserwatorium w Gda≈Ñsku:", a: ["Jan Heweliusz","Kopernik","Tadeusz Banachiewicz","Kazimierz Kordylewski"], correct: 0 },
  { q: "Najd≈Çu≈ºszy most w Polsce:", a: ["Most Solidarno≈õci w P≈Çocku","Most Gda≈Ñski","Most Poniatowskiego","Most ≈Åazienkowski"], correct: 0 },
  { q: "Polski tenisista z tytu≈Çem ATP:", a: ["Hubert Hurkacz","Jerzy Janowicz","≈Åukasz Kubot","Mariusz Fyrstenberg"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. dolno≈õlƒÖskiego:", a: ["Wroc≈Çaw","Legnica","Wa≈Çbrzych","Jelenia G√≥ra"], correct: 0 },
  { q: "Polska najwiƒôksze g√≥ry:", a: ["Tatry","Sudety","Bieszczady","G√≥ry ≈öwiƒôtokrzyskie"], correct: 0 },
  { q: "Najstarsza uczelnia w Polsce:", a: ["Uniwersytet Jagiello≈Ñski","Uniwersytet Warszawski","Politechnika Warszawska","Akademia G√≥rniczo-Hutnicza"], correct: 0 },
  { q: "Polski hokeista olimpijski:", a: ["Mariusz Czerkawski","Andrzej Zabawa","Adam Heinricha","Tomasz Valtonen"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. lubelskiego:", a: ["Lublin","Zamo≈õƒá","Che≈Çm","Pu≈Çawy"], correct: 0 },
  { q: "Polski kompozytor operowy:", a: ["Stanis≈Çaw Moniuszko","Fryderyk Chopin","Karol Szymanowski","Wojciech Kilar"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w woj. wielkopolskim:", a: ["Warta","Noteƒá","Obra","Prosna"], correct: 0 },
  { q: "Polski lekkoatleta mistrz olimpijski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õlƒÖskiego:", a: ["Katowice","Gliwice","Czƒôstochowa","Bytom"], correct: 0 },
  { q: "Polski noblista literacki XX w.:", a: ["Czes≈Çaw Mi≈Çosz","Henryk Sienkiewicz","Wis≈Çawa Szymborska","Olga Tokarczuk"], correct: 0 },
  { q: "Najwy≈ºszy szczyt Beskid√≥w:", a: ["Babia G√≥ra","Pilsko","Czantoria","Barania G√≥ra"], correct: 0 },
  { q: "Polski kierowca rajdowy znany w Europie:", a: ["Robert Kubica","Kamil Stoch","Adam Ma≈Çysz","Mariusz Czerkawski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. podkarpackiego:", a: ["Rzesz√≥w","Przemy≈õl","Stalowa Wola","Mielec"], correct: 0 },
  { q: "Polska flaga jest w kolorach:", a: ["Bia≈Çy i czerwony","Bia≈Çy i niebieski","Czerwony i niebieski","Bia≈Çy i czarny"], correct: 0 },
  { q: "Polski noblista chemik:", a: ["Maria Sk≈Çodowska-Curie","Jan Czochralski","Micha≈Ç Kalecki","Henryk Arctowski"], correct: 0 },
  { q: "Najd≈Çu≈ºsza ulica w Krakowie:", a: ["≈Åobzowska","Floria≈Ñska","Straszewskiego","D≈Çuga"], correct: 0 },
  { q: "Polski skoczek narciarski, z≈Çoty medal olimpijski:", a: ["Kamil Stoch","Adam Ma≈Çysz","Piotr ≈ªy≈Ça","Andrzej Stƒôka≈Ça"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. warmi≈Ñsko-mazurskiego:", a: ["Olsztyn","ElblƒÖg","E≈Çk","Gi≈ºycko"], correct: 0 },
  { q: "Polski noblista literacki XX/XXI w.:", a: ["Olga Tokarczuk","Czes≈Çaw Mi≈Çosz","Wis≈Çawa Szymborska","Henryk Sienkiewicz"], correct: 0 },
  { q: "Najd≈Çu≈ºsze wybrze≈ºe w Polsce:", a: ["Pomorskie","Zachodniopomorskie","Warmi≈Ñsko-Mazurskie","P√≥≈Çnocno-Zachodnie"], correct: 0 },
  { q: "Polski kompozytor muzyki filmowej:", a: ["Wojciech Kilar","Fryderyk Chopin","Stanis≈Çaw Moniuszko","Karol Szymanowski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. lubuskiego:", a: ["Gorz√≥w Wielkopolski","Zielona G√≥ra","≈ªary","Nowa S√≥l"], correct: 0 },
  { q: "Polski noblista w dziedzinie fizyki:", a: ["Maria Sk≈Çodowska-Curie","Andrzej Schinzel","Stefan Banach","Kazimierz Fajans"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õwiƒôtokrzyskiego:", a: ["Kielce","Skar≈ºysko-Kamienna","Ostrowiec ≈öwiƒôtokrzyski","Starachowice"], correct: 0 },
  { q: "Polski medalista olimpijski w lekkoatletyce:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. podlaskiego:", a: ["Bia≈Çystok","≈Åom≈ºa","Suwa≈Çki","August√≥w"], correct: 0 },
  { q: "Polski poeta romantyczny:", a: ["Adam Mickiewicz","Juliusz S≈Çowacki","Cyprian Kamil Norwid","Zygmunt Krasi≈Ñski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. opolskiego:", a: ["Opole","Nysa","Kƒôdzierzyn-Ko≈∫le","Brzeg"], correct: 0 },
  { q: "Polski pi≈Çkarz grajƒÖcy w Bayernie Monachium:", a: ["Robert Lewandowski","Grzegorz Krychowiak","Kamil Glik","≈Åukasz Piszczek"], correct: 0 },
  { q: "Najwy≈ºszy szczyt Bieszczad:", a: ["Tarnica","Halicz","Kr√≥lowa","Cary≈Ñska"], correct: 0 },
  { q: "Polski noblista literacki z XX w.:", a: ["Wis≈Çawa Szymborska","Henryk Sienkiewicz","Czes≈Çaw Mi≈Çosz","Olga Tokarczuk"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. kujawsko-pomorskiego:", a: ["Bydgoszcz","Toru≈Ñ","W≈Çoc≈Çawek","GrudziƒÖdz"], correct: 0 },
  { q: "Polski matematyk, tw√≥rca analizy funkcjonalnej:", a: ["Stefan Banach","Jan ≈Åukasiewicz","Kazimierz Kuratowski","Wac≈Çaw Sierpi≈Ñski"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w woj. podkarpackim:", a: ["San","Wis≈Çoka","Wis≈Çok","Dunajec"], correct: 0 },
  { q: "Polski tenisista grajƒÖcy w turniejach ATP:", a: ["Hubert Hurkacz","Jerzy Janowicz","≈Åukasz Kubot","Mariusz Fyrstenberg"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. zachodniopomorskiego:", a: ["Szczecin","Koszalin","Stargard","≈öwinouj≈õcie"], correct: 0 },
  { q: "Polski noblista w dziedzinie fizyki:", a: ["Maria Sk≈Çodowska-Curie","Andrzej Schinzel","Kazimierz Fajans","Stefan Banach"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈Ç√≥dzkiego:", a: ["≈Å√≥d≈∫","Piotrk√≥w Trybunalski","Pabianice","Zgierz"], correct: 0 },
  { q: "Polski aktor znany z film√≥w Andrzeja Wajdy:", a: ["Daniel Olbrychski","Zbigniew Zamachowski","Bogus≈Çaw Linda","Janusz Gajos"], correct: 0 },
  { q: "Najd≈Çu≈ºszy tunel drogowy w Polsce:", a: ["Tunel pod ≈öwinƒÖ","Tunel w ≈öwierku","Tunel pod MartwƒÖ Wis≈ÇƒÖ","Tunel w Miƒôdzyrzeczu"], correct: 0 },
  { q: "Polski hokeista grajƒÖcy w NHL:", a: ["Mariusz Czerkawski","Andrzej Zabawa","Adam Heinricha","Tomasz Valtonen"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ma≈Çopolskiego:", a: ["Krak√≥w","Tarn√≥w","Nowy SƒÖcz","O≈õwiƒôcim"], correct: 0 },
  { q: "Polski kompozytor operowy:", a: ["Stanis≈Çaw Moniuszko","Fryderyk Chopin","Karol Szymanowski","Wojciech Kilar"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w woj. wielkopolskim:", a: ["Warta","Noteƒá","Obra","Prosna"], correct: 0 },
  { q: "Polski lekkoatleta mistrz olimpijski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õlƒÖskiego:", a: ["Katowice","Gliwice","Czƒôstochowa","Bytom"], correct: 0 },
  { q: "Polski noblista literacki XX w.:", a: ["Czes≈Çaw Mi≈Çosz","Henryk Sienkiewicz","Wis≈Çawa Szymborska","Olga Tokarczuk"], correct: 0 },
  { q: "Najwy≈ºszy szczyt Beskid√≥w:", a: ["Babia G√≥ra","Pilsko","Czantoria","Barania G√≥ra"], correct: 0 },
  { q: "Polski aktor komediowy:", a: ["Bohdan Smole≈Ñ","Jerzy Stuhr","Cezary Pazura","Andrzej Grabowski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. pomorskiego:", a: ["Gda≈Ñsk","Gdynia","S≈Çupsk","ElblƒÖg"], correct: 0 },
  { q: "Polski re≈ºyser filmowy:", a: ["Krzysztof Kie≈õlowski","Andrzej Wajda","Roman Pola≈Ñski","Jerzy Hoffman"], correct: 0 },
  { q: "Najwiƒôksze jezioro w woj. warmi≈Ñsko-mazurskim:", a: ["≈öniardwy","Mamry","Niegocin","Jagodne"], correct: 0 },
  { q: "Polski pi≈Çkarz grajƒÖcy w reprezentacji:", a: ["Robert Lewandowski","Grzegorz Krychowiak","Kamil Glik","≈Åukasz Piszczek"], correct: 0 },
  { q: "Najstarsze miasto w Polsce:", a: ["Kalisz","Krak√≥w","Gniezno","Pozna≈Ñ"], correct: 0 },
  { q: "Polski aktor dramatyczny:", a: ["Janusz Gajos","Daniel Olbrychski","Bogus≈Çaw Linda","Zbigniew Zamachowski"], correct: 0 },
  { q: "Najwy≈ºsza g√≥ra w Tatrach Wysokich:", a: ["Rysy","Gerlach","Lomnicki Szczyt","≈öwinica"], correct: 0 },
  { q: "Polski noblista literacki:", a: ["Henryk Sienkiewicz","Maria Sk≈Çodowska-Curie","Czes≈Çaw Mi≈Çosz","Wis≈Çawa Szymborska"], correct: 0 },
  { q: "Najd≈Çu≈ºsza ulica w Warszawie:", a: ["Marsza≈Çkowska","Nowy ≈öwiat","Krakowskie Przedmie≈õcie","Aleje Jerozolimskie"], correct: 0 },
  { q: "Polski matematyk, tw√≥rca analizy funkcjonalnej:", a: ["Stefan Banach","Jan ≈Åukasiewicz","Kazimierz Kuratowski","Wac≈Çaw Sierpi≈Ñski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. lubelskiego:", a: ["Lublin","Zamo≈õƒá","Che≈Çm","Pu≈Çawy"], correct: 0 },
  { q: "Polski lekkoatleta, wielokrotny mistrz Polski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. opolskiego:", a: ["Opole","Nysa","Kƒôdzierzyn-Ko≈∫le","Brzeg"], correct: 0 },
  { q: "Polski p≈Çywak olimpijski:", a: ["Otylia Jƒôdrzejczak","Rados≈Çaw Kawƒôcki","Pawe≈Ç Korzeniowski","Micha≈Ç Rokicki"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. podlaskiego:", a: ["Bia≈Çystok","≈Åom≈ºa","Suwa≈Çki","August√≥w"], correct: 0 },
  { q: "Polski koszykarz NBA:", a: ["Marcin Gortat","Maciej Lampe","Adam W√≥jcik","Tomasz Gielo"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w woj. ≈õlƒÖskim:", a: ["Wis≈Ça","Oder","Warta","Bzura"], correct: 0 },
  { q: "Polski lekkoatleta rekordzista ≈õwiata:", a: ["Robert Korzeniowski","Irena Szewi≈Ñska","Wojciech Nowicki","Pawe≈Ç Fajdek"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. lubuskiego:", a: ["Gorz√≥w Wielkopolski","Zielona G√≥ra","≈ªary","Nowa S√≥l"], correct: 0 },
  { q: "Polski siatkarz mistrz ≈õwiata:", a: ["Bart≈Çomiej Lema≈Ñski","Wilfredo Le√≥n","Micha≈Ç Kubiak","Piotr Nowakowski"], correct: 2 },
  { q: "Najwy≈ºszy szczyt w G√≥rach ≈öwiƒôtokrzyskich:", a: ["≈Åysica","≈Åysa G√≥ra","≈Åysiec","Che≈Çmowa"], correct: 0 },
  { q: "Polski hokeista grajƒÖcy w NHL:", a: ["Mariusz Czerkawski","Andrzej Zabawa","Adam Heinricha","Tomasz Valtonen"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. podkarpackiego:", a: ["Rzesz√≥w","Przemy≈õl","Stalowa Wola","Mielec"], correct: 0 },
  { q: "Polski siatkarz z medalem olimpijskim:", a: ["Micha≈Ç Kubiak","Bart≈Çomiej Lema≈Ñski","Wilfredo Le√≥n","Piotr Nowakowski"], correct: 3 },
  { q: "Najwiƒôksze miasto woj. ma≈Çopolskiego:", a: ["Krak√≥w","Tarn√≥w","Nowy SƒÖcz","O≈õwiƒôcim"], correct: 0 },
  { q: "Polski skoczek narciarski z Pucharem ≈öwiata:", a: ["Kamil Stoch","Adam Ma≈Çysz","Piotr ≈ªy≈Ça","Andrzej Stƒôka≈Ça"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õlƒÖskiego:", a: ["Katowice","Gliwice","Czƒôstochowa","Bytom"], correct: 0 },
  { q: "Polski lekkoatleta, rekordzista olimpijski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈Ç√≥dzkiego:", a: ["≈Å√≥d≈∫","Piotrk√≥w Trybunalski","Pabianice","Zgierz"], correct: 0 },
  { q: "Polski re≈ºyser filmowy:", a: ["Krzysztof Kie≈õlowski","Andrzej Wajda","Roman Pola≈Ñski","Jerzy Hoffman"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. pomorskiego:", a: ["Gda≈Ñsk","Gdynia","S≈Çupsk","ElblƒÖg"], correct: 0 },
  { q: "Polski kompozytor muzyki filmowej:", a: ["Wojciech Kilar","Fryderyk Chopin","Stanis≈Çaw Moniuszko","Karol Szymanowski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. zachodniopomorskiego:", a: ["Szczecin","Koszalin","Stargard","≈öwinouj≈õcie"], correct: 0 },
  { q: "Polski pi≈Çkarz grajƒÖcy w reprezentacji:", a: ["Robert Lewandowski","Grzegorz Krychowiak","Kamil Glik","≈Åukasz Piszczek"], correct: 0 },
  { q: "Najstarsze miasto w Polsce:", a: ["Kalisz","Krak√≥w","Gniezno","Pozna≈Ñ"], correct: 0 },
  { q: "Polski aktor dramatyczny:", a: ["Janusz Gajos","Daniel Olbrychski","Bogus≈Çaw Linda","Zbigniew Zamachowski"], correct: 0 },
  { q: "Najwy≈ºsza g√≥ra w Tatrach Wysokich:", a: ["Rysy","Gerlach","Lomnicki Szczyt","≈öwinica"], correct: 0 },
  { q: "Polski noblista literacki:", a: ["Henryk Sienkiewicz","Maria Sk≈Çodowska-Curie","Czes≈Çaw Mi≈Çosz","Wis≈Çawa Szymborska"], correct: 0 },
  { q: "Najd≈Çu≈ºsza ulica w Warszawie:", a: ["Marsza≈Çkowska","Nowy ≈öwiat","Krakowskie Przedmie≈õcie","Aleje Jerozolimskie"], correct: 0 },
  { q: "Polski matematyk, tw√≥rca analizy funkcjonalnej:", a: ["Stefan Banach","Jan ≈Åukasiewicz","Kazimierz Kuratowski","Wac≈Çaw Sierpi≈Ñski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. lubelskiego:", a: ["Lublin","Zamo≈õƒá","Che≈Çm","Pu≈Çawy"], correct: 0 },
  { q: "Polski lekkoatleta, wielokrotny mistrz Polski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. opolskiego:", a: ["Opole","Nysa","Kƒôdzierzyn-Ko≈∫le","Brzeg"], correct: 0 },
  { q: "Polski p≈Çywak, medalista olimpijski:", a: ["Otylia Jƒôdrzejczak","Pawe≈Ç Korzeniowski","Rados≈Çaw Kawƒôcki","Micha≈Ç Rokicki"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. podkarpackiego:", a: ["Rzesz√≥w","Przemy≈õl","Stalowa Wola","Mielec"], correct: 0 },
  { q: "Polski koszykarz reprezentant:", a: ["Marcin Gortat","Maciej Lampe","Adam W√≥jcik","Tomasz Gielo"], correct: 0 },
  { q: "Najwy≈ºszy szczyt Beskid√≥w:", a: ["Babia G√≥ra","Pilsko","Czantoria","Barania G√≥ra"], correct: 0 },
  { q: "Polski hokeista grajƒÖcy w NHL:", a: ["Mariusz Czerkawski","Andrzej Zabawa","Adam Heinricha","Tomasz Valtonen"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. warmi≈Ñsko-mazurskiego:", a: ["Olsztyn","ElblƒÖg","E≈Çk","Gi≈ºycko"], correct: 0 },
  { q: "Polski skoczek narciarski z medalem olimpijskim:", a: ["Kamil Stoch","Adam Ma≈Çysz","Piotr ≈ªy≈Ça","Andrzej Stƒôka≈Ça"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õwiƒôtokrzyskiego:", a: ["Kielce","Skar≈ºysko-Kamienna","Ostrowiec ≈öwiƒôtokrzyski","Starachowice"], correct: 0 },
  { q: "Polski aktor znany z film√≥w Andrzeja Wajdy:", a: ["Daniel Olbrychski","Zbigniew Zamachowski","Bogus≈Çaw Linda","Janusz Gajos"], correct: 0 },
  { q: "Najd≈Çu≈ºsze wybrze≈ºe w Polsce:", a: ["Pomorskie","Zachodniopomorskie","Warmi≈Ñsko-Mazurskie","P√≥≈Çnocno-Zachodnie"], correct: 0 },
  { q: "Polski noblista w dziedzinie fizyki:", a: ["Maria Sk≈Çodowska-Curie","Andrzej Schinzel","Kazimierz Fajans","Stefan Banach"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. kujawsko-pomorskiego:", a: ["Bydgoszcz","Toru≈Ñ","W≈Çoc≈Çawek","GrudziƒÖdz"], correct: 0 },
  { q: "Polski kompozytor operowy:", a: ["Stanis≈Çaw Moniuszko","Fryderyk Chopin","Karol Szymanowski","Wojciech Kilar"], correct: 0 },
  { q: "Najd≈Çu≈ºsza rzeka w woj. wielkopolskim:", a: ["Warta","Noteƒá","Obra","Prosna"], correct: 0 },
  { q: "Polski lekkoatleta mistrz olimpijski:", a: ["Irena Szewi≈Ñska","Robert Lewandowski","Kamil Stoch","Adam Ma≈Çysz"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. ≈õlƒÖskiego:", a: ["Katowice","Gliwice","Czƒôstochowa","Bytom"], correct: 0 },
  { q: "Polski noblista literacki XX w.:", a: ["Czes≈Çaw Mi≈Çosz","Henryk Sienkiewicz","Wis≈Çawa Szymborska","Olga Tokarczuk"], correct: 0 },
  { q: "Najwy≈ºszy szczyt Beskid√≥w:", a: ["Babia G√≥ra","Pilsko","Czantoria","Barania G√≥ra"], correct: 0 },
  { q: "Polski aktor komediowy:", a: ["Bohdan Smole≈Ñ","Jerzy Stuhr","Cezary Pazura","Andrzej Grabowski"], correct: 0 },
  { q: "Najwiƒôksze miasto woj. pomorskiego:", a: ["Gda≈Ñsk","Gdynia","S≈Çupsk","ElblƒÖg"], correct: 0 },
  { q: "Polski re≈ºyser filmowy:", a: ["Krzysztof Kie≈õlowski","Andrzej Wajda","Roman Pola≈Ñski","Jerzy Hoffman"], correct: 0 },
  { q: "Najwiƒôksze jezioro w woj. warmi≈Ñsko-mazurskim:", a: ["≈öniardwy","Mamry","Niegocin","Jagodne"], correct: 0 },
  { q: "Polski pi≈Çkarz grajƒÖcy w reprezentacji:", a: ["Robert Lewandowski","Grzegorz Krychowiak","Kamil Glik","≈Åukasz Piszczek"], correct: 0 },
  { q: "Najstarsze miasto w Polsce:", a: ["Kalisz","Krak√≥w","Gniezno","Pozna≈Ñ"], correct: 0 },
  { q: "Polski aktor dramatyczny:", a: ["Janusz Gajos","Daniel Olbrychski","Bogus≈Çaw Linda","Zbigniew Zamachowski"], correct: 0 },
  { q: "Najwy≈ºsza g√≥ra w Tatrach Wysokich:", a: ["Rysy","Gerlach","Lomnicki Szczyt","≈öwinica"], correct: 0 }
  ];

  function getRandomSession(){ return QUESTIONS.map((q,i)=>({q,i})).sort(()=>Math.random()-0.5).slice(0,14).map(o=>o.i); }
  let sessionQuestions = getRandomSession();

  function showQuestion(){
    if(current === 7){ showMidAd(); return; }
    if(current >= sessionQuestions.length){ showVideoAd(); return; }

    adTop.style.display = 'block';
    adBottom.style.display = 'block';
    videoAd.style.display = 'none';

    const idx = sessionQuestions[current];
    const q = QUESTIONS[idx];
    questionEl.textContent = q.q;
    answersEl.innerHTML="";

    const shuffled = q.a.map((ans,i)=>({ans,i})).sort(()=>Math.random()-0.5);
    shuffled.forEach(obj=>{
      const b = document.createElement('div');
      b.className='btn';
      b.textContent = obj.ans;
      b.onclick = ()=>answer(obj.i, b, idx);
      answersEl.appendChild(b);
    });

    progressEl.textContent = `Pytanie ${current+1}/${sessionQuestions.length}`;
  }

  function answer(idxAnswer, btn, questionIndex){
    const correct = QUESTIONS[questionIndex].correct;
    if(idxAnswer===correct){
      btn.classList.add('good');
      $('snd-ding').play();
      points++;
      firework();
    } else {
      btn.classList.add('bad');
      $('snd-buzzer').play();
    }
    pointsEl.textContent=points;
    current++;
    setTimeout(showQuestion,400);
  }

  function showMidAd(){
    adTop.style.display='none';
    adBottom.style.display='none';
    questionEl.textContent = "OglƒÖdaj reklamƒô, aby kontynuowaƒá";
    answersEl.innerHTML = "";
    videoAd.style.display='flex';
    bg.volume = 0.1;

    setTimeout(()=>{
      videoAd.style.display='none';
      bg.volume = 0.65;
      current++;
      showQuestion();
    }, 15000);
  }

  function showVideoAd(){
    adTop.style.display='none';
    adBottom.style.display='none';
    questionEl.textContent="OglƒÖdaj reklamƒô, aby zobaczyƒá wynik";
    answersEl.innerHTML="";
    videoAd.style.display='flex';
    bg.volume=0.1;

    setTimeout(()=>{
      videoAd.style.display='none';
      bg.volume=0.65;
      finishQuiz();
    },15000);
  }

  function finishQuiz(){
    const nick = nickEl.value || "Anon";
    finalText.textContent=`${points} pkt`;
    finalEl.style.display='flex';
    $('snd-fanfare').play();
    startFireworks();
  }

  $('retryBtn').onclick=()=>{
    points=0; current=0; pointsEl.textContent='0';
    sessionQuestions = getRandomSession();
    finalEl.style.display='none';

    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,canvas.width,canvas.height);
    showQuestion();
  }

  $('shareBtn').onclick=()=>{
    const url = location.href;
    const text = 'Zagraj w QuizProPL ‚Äî sprawd≈∫ wiedzƒô o Polsce!';
    if(navigator.share){
      navigator.share({ title: 'QuizProPL', text, url }).catch(()=>{});
    } else {
      navigator.clipboard?.writeText(url).then(()=>{
        const msg = $('msgBox'); msg.textContent = 'Link skopiowany do schowka'; msg.style.display='block';
        setTimeout(()=> msg.style.display='none',2000);
      }).catch(()=>{ alert('Skopiuj link: ' + url); });
    }
  }

  $('endBtn').onclick=()=>{ finalEl.style.display='none'; }

  function firework(){
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const particles=[];
    const colors=['#ff3fc4','#00f0ff','#16d36a','#ffd27a','#ff5c6c'];

    const bursts=3+Math.floor(Math.random()*3);
    for(let b=0;b<bursts;b++){
      const cx=Math.random()*canvas.width;
      const cy=Math.random()*canvas.height/2;
      const numParticles=20+Math.floor(Math.random()*20);
      for(let i=0;i<numParticles;i++){
        const angle=Math.random()*2*Math.PI;
        const speed=2+Math.random()*4;
        const radius=2+Math.random()*2;
        const color=colors[Math.floor(Math.random()*colors.length)];
        particles.push({x:cx,y:cy,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed,alpha:1,color,radius,decay:0.015+Math.random()*0.015,gravity:0.03+Math.random()*0.02});
      }
    }

    function draw(){
      ctx.fillStyle='rgba(0,0,0,0.2)';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      particles.forEach((p,i)=>{
        ctx.beginPath();
        const grad = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.radius*3);
        grad.addColorStop(0,p.color);
        grad.addColorStop(1,'rgba(0,0,0,0)');
        ctx.fillStyle=grad;
        ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
        ctx.fill();

        p.x+=p.vx;
        p.y+=p.vy;
        p.vy+=p.gravity;
        p.alpha-=p.decay;
        p.vx*=0.98;
      });

      for(let i=particles.length-1;i>=0;i--){ if(particles[i].alpha<=0) particles.splice(i,1); }

      if(particles.length>0) requestAnimationFrame(draw);
      else ctx.clearRect(0,0,canvas.width,canvas.height);
    }
    draw();
  }

  function startFireworks(){ firework(); setTimeout(firework,500); setTimeout(firework,1000); }
  showQuestion();
})();
</script>
</body>
</html>
